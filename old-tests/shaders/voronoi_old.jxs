<jittershader name="voronoi">
	<description>
	Voronoi
	</description>
	<param name="seeds" type="vec2" default="0. 0." />
	<param name="colors" type="vec3" default="1. 1. 1." />
	<language name="glsl" version="1.2">
		<bind param="seeds" program="fp" />
		<bind param="colors" program="fp" />
		<program name="vp" type="vertex" source="sh.passthru.xform.vp.glsl" />
		<program name="fp" type="fragment">
<![CDATA[

varying vec2 texcoord0;
uniform sampler2DRect tex0;

uniform vec2 seeds[4];
uniform vec3 colors[4];

void main()
{
	float dist = distance(seeds[0], gl_FragCoord.xy);
    vec3 color = colors[0];

    for (int i = 0; i < 4; i++) {
        float current = distance(seeds[i], gl_FragCoord.xy);
        if (current < dist) {
            color = colors[i];
            dist = current;
        }
		color += 1.-step(.02, current);
    }


	
	
	gl_FragColor = vec4(vec3(color.r,color.r,color.r),1.0);
	//	gl_FragColor = vec4(color,1.0);
}

]]>
		</program>
	</language>
</jittershader>